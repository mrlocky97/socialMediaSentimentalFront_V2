<div class="campaigns-container">
  <!-- Header Section -->
  <header class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        {{ 'campaign_list.campaign_manager' | transloco }}
      </h1>
      <p class="page-subtitle">
        {{ 'campaign_list.subtitle' | transloco }}
      </p>
    </div>

    <div class="header-actions">
      <button
        mat-raised-button
        color="primary"
        class="create-campaign-btn"
        (click)="navigateToCreateCampaign()"
        [attr.aria-label]="'campaign_list.new_campaign' | transloco"
      >
        <mat-icon>add</mat-icon>
        {{ 'campaign_list.new_campaign' | transloco }}
      </button>
    </div>
  </header>

  <!-- Quick Stats Cards -->
  @if ((campaigns$ | async)?.length && (campaigns$ | async)!.length > 0) {
    <section class="stats-grid">
      @for (stat of statsConfig; track stat.key) {
        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-content">
              <div class="stat-number">{{ getStatValue(stat.key) }}</div>
              <div class="stat-label">{{ stat.labelKey | transloco }}</div>
            </div>
            <mat-icon [class]="'stat-icon ' + stat.iconClass">{{ stat.icon }}</mat-icon>
          </mat-card-content>
        </mat-card>
      }
    </section>
  }

  <!-- Loading State -->
  @if (loading$ | async) {
    <div class="loading-container" role="status" [attr.aria-label]="'campaign_list.loading' | transloco">
      <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
      <p>{{ 'campaign_list.loading' | transloco }}</p>
    </div>
  }

  <!-- Empty State -->
  @if (!(loading$ | async) && (campaigns$ | async)?.length === 0 && !(error$ | async)) {
    <section class="empty-state">
      <mat-card class="empty-card">
        <mat-card-content>
          <div class="empty-content">
            <mat-icon class="empty-icon" aria-hidden="true">campaign</mat-icon>
            <h2>{{ 'campaign_list.empty' | transloco }}</h2>
            <p>{{ 'campaign_list.create_first' | transloco }}</p>
            <button
              mat-raised-button
              color="primary"
              class="empty-action-btn"
              (click)="navigateToCreateCampaign()"
              [attr.aria-label]="'campaign_list.new_campaign' | transloco"
            >
              <mat-icon>add</mat-icon>
              {{ 'campaign_list.new_campaign' | transloco }}
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </section>
  }

  <!-- Campaigns Table -->
  @if (!(loading$ | async) && ((campaigns$ | async) || []).length > 0) {
    <mat-card class="table-card">
      <header class="table-header">
        <h3>
          {{ 'campaign_list.campaigns' | transloco }} 
          <span class="campaign-count">({{ ((campaigns$ | async) || []).length }})</span>
        </h3>
        
        @if (hasSelectedCampaigns()) {
          <div class="table-actions">
            <button 
              mat-button 
              [matMenuTriggerFor]="bulkMenu"
              [attr.aria-label]="'campaign_list.bulk_actions' | transloco"
            >
              <mat-icon>more_vert</mat-icon>
              {{ 'campaign_list.actions' | transloco }} ({{ selectedCampaigns().size }})
            </button>
            
            <mat-menu #bulkMenu="matMenu">
              @for (action of bulkActions; track action.key) {
                <button 
                  mat-menu-item 
                  (click)="bulkAction(action.key)"
                  [class]="action.cssClass || ''"
                  [attr.aria-label]="action.labelKey | transloco"
                >
                  <mat-icon>{{ action.icon }}</mat-icon>
                  {{ action.labelKey | transloco }}
                </button>
              }
            </mat-menu>
          </div>
        }
      </header>

      <div class="table-container">
        <app-solid-data-table
          [data]="(campaigns$ | async) || []"
          [columns]="tableColumns"
          [config]="tableConfig"
          [actions]="tableActions"
          [loading]="(loading$ | async) || false"
          [error]="error$ | async"
          (rowClick)="navigateToCampaign($event)"
          (actionClick)="onTableAction($event)"
          (pageChange)="onPageChange($event)"
        />
      </div>
    </mat-card>
  }

  <!-- Error State -->
  @if (error$ | async) {
    <section class="error-state" role="alert">
      <mat-card class="error-card">
        <mat-card-content>
          <mat-icon class="error-icon" aria-hidden="true">error</mat-icon>
          <h3>{{ 'campaign_list.error_loading' | transloco }}</h3>
          <p>{{ error$ | async }}</p>
          <button 
            mat-raised-button 
            color="primary" 
            (click)="loadCampaigns()"
            [attr.aria-label]="'campaign_list.try_again' | transloco"
          >
            {{ 'campaign_list.try_again' | transloco }}
          </button>
        </mat-card-content>
      </mat-card>
    </section>
  }
</div>