<div class="campaigns-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        {{ 'campaign_list.campaign_manager' | transloco }}
      </h1>
      <p class="page-subtitle">
        {{ 'campaign_list.subtitle' | transloco }}
      </p>
    </div>

    <div class="header-actions">
      <button
        mat-raised-button
        color="primary"
        class="create-campaign-btn"
        (click)="navigateToCreateCampaign()"
      >
        <mat-icon>add</mat-icon>
        {{ 'campaign_list.new_campaign' | transloco }}
      </button>
    </div>
  </div>

  <!-- Quick Stats Cards -->
  <div class="stats-grid" *ngIf="campaigns().length > 0">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-number">{{ getTotalCampaigns() }}</div>
          <div class="stat-label">{{ 'campaign_list.total_campaigns' | transloco }}</div>
        </div>
        <mat-icon class="stat-icon">campaign</mat-icon>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-number">{{ getActiveCampaigns() }}</div>
          <div class="stat-label">{{ 'campaign_list.campaign_active' | transloco }}</div>
        </div>
        <mat-icon class="stat-icon active">play_circle</mat-icon>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-number">{{ getPausedCampaigns() }}</div>
          <div class="stat-label">{{ 'campaign_list.pause' | transloco }}</div>
        </div>
        <mat-icon class="stat-icon warning">pause_circle</mat-icon>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-number">{{ getDraftCampaigns() }}</div>
          <div class="stat-label">{{ 'campaign_list.draft' | transloco }}</div>
        </div>
        <mat-icon class="stat-icon secondary">drafts</mat-icon>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Filters Section -->
  <mat-card class="filters-card" *ngIf="campaigns().length > 0">
    <mat-card-content>
      <form [formGroup]="filterForm" class="filters-form">
        <div class="filter-row">
          <mat-form-field appearance="outline" class="search-field">
            <mat-label>{{ 'campaign_list.search' | transloco }}</mat-label>
            <input
              matInput
              formControlName="search"
              [placeholder]="'campaign_list.search' | transloco"
            />
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>{{ 'campaign_list.status' | transloco }}</mat-label>
            <mat-select formControlName="status" multiple>
              <mat-option value="active">
                {{ 'campaign_list.status.active' | transloco }}
              </mat-option>
              <mat-option value="paused">
                {{ 'campaign_list.status.paused' | transloco }}
              </mat-option>
              <mat-option value="completed">
                {{ 'campaign_list.status.completed' | transloco }}
              </mat-option>
              <mat-option value="draft">{{ 'campaign_list.status.draft' | transloco }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>{{ 'campaign_list.type' | transloco }}</mat-label>
            <mat-select formControlName="type" multiple>
              <mat-option value="hashtag">{{ 'campaign_list.type.hastag' | transloco }} Monitoring</mat-option>
              <mat-option value="keyword">{{ 'campaign_list.type.keyword' | transloco }} Tracking</mat-option>
              <mat-option value="user">{{ 'campaign_list.type.monitoring' | transloco }} Monitoring</mat-option>
              <mat-option value="mention">{{ 'campaign_list.type.tranking' | transloco }} Tracking</mat-option>
            </mat-select>
          </mat-form-field>

          <button mat-icon-button (click)="clearFilters()" matTooltip="Clear filters">
            <mat-icon>clear</mat-icon>
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading()">
    <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
    <p>
      {{ "campaign_list.loading" | transloco}}
    </p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading() && campaigns().length === 0">
    <mat-card class="empty-card">
      <mat-card-content>
        <div class="empty-content">
          <mat-icon class="empty-icon">campaign</mat-icon>
          <h2>{{ "campaign_list.empty" }}</h2>
          <p>{{ "campaign_list.create_first" | transloco }}</p>
          <button
            mat-raised-button
            color="primary"
            class="empty-action-btn"
            (click)="navigateToCreateCampaign()"
          >
            <mat-icon>add</mat-icon>
            {{ 'campaign_list.create_first' | transloco }}
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Campaigns Table -->
  <mat-card class="table-card" *ngIf="!loading() && filteredCampaigns().length > 0">
    <div class="table-header">
      <h3>{{ "campaign_list.campaigns" | transloco }} ({{ filteredCampaigns().length }})</h3>
      <div class="table-actions" *ngIf="hasSelectedCampaigns()">
        <button mat-button [matMenuTriggerFor]="bulkMenu">
          <mat-icon>more_vert</mat-icon>
          {{ "campaign_list.actions" | transloco}} ({{ selectedCampaigns().size }})
        </button>
        <mat-menu #bulkMenu="matMenu">
          <button mat-menu-item (click)="bulkAction('pause')">
            <mat-icon>pause</mat-icon>
            {{ "campaign_list.pause" | transloco }}
          </button>
          <button mat-menu-item (click)="bulkAction('resume')">
            <mat-icon>play_arrow</mat-icon>
            {{ "campaign_list.resume" | transloco }}
          </button>
          <button mat-menu-item (click)="bulkAction('delete')" class="danger-action">
            <mat-icon>delete</mat-icon>
            {{ "campaign_list.delete" | transloco }}
          </button>
        </mat-menu>
      </div>
    </div>

    <div class="table-container">
      <app-solid-data-table-rxjs
        [data]="campaigns()"
        [columns]="tableColumns"
        [config]="tableConfig"
        [actions]="tableActions"
        [loading]="loading()"
        [error]="error()"
        (rowClick)="navigateToCampaign($event)"
        (actionClick)="onTableAction($event)"
        (pageChange)="onPageChange($event)"
      ></app-solid-data-table-rxjs>
    </div>
    
    <!-- paginator is handled by the generic table component -->

  </mat-card>

  <!-- Error State -->
  <div class="error-state" *ngIf="error()">
    <mat-card class="error-card">
      <mat-card-content>
        <mat-icon class="error-icon">error</mat-icon>
        <h3>{{ "campaign_list.error_loading" | transloco }}</h3>
        <p>{{ error() }}</p>
        <button mat-raised-button color="primary" (click)="loadCampaigns()">{{ "campaign_list.try_again" | transloco}}</button>
      </mat-card-content>
    </mat-card>
  </div>
</div>
